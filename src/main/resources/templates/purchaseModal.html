<!DOCTYPE html>
<html lang="en">

<head th:replace="~{ head :: headFragment}">

</head>

<head th:replace="~{ head :: headPurchaseFragment}">

</head>

<body>
    <!-- top navbar -->
    <nav th:replace="~{ topNavBar :: topnavbarfragment}"></nav>

    <!-- side bar -->
    <div th:replace="~{ sideBar :: sidebarfragment}"></div>

    <!-- Ui content area -->

    <div class="container ">

        <div class="row main mt-5">
            <div class="col mt-1" style="height: 500px;">
                <div class="container-fluid mt-1 p-4 ">
                    <!-- title -->
                    <div class="row">
                        <div class="col-12 text-center">
                            <h2><i class="fa-solid fa-user "></i>Purchase Management </h2>

                        </div>
                    </div>

                </div>
                <!-- form button start -->
                <div class="row col-2 " style="padding-left: 15px;">
                    <button class="btn btn-primary" type="button" data-bs-toggle="modal" data-bs-target="#empForm">
                        Form
                    </button>
                </div>
                <!-- form modal start -->
                <div class="modal fade" id="empForm" tabindex="-1" aria-labelledby="exampleModalLabel"
                    aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Purchase Form</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                                    data-bs-target="#staticBackdrop"></button>
                            </div>
                            <div class="modal-body" data-bs-backdrop="static" data-bs-keyboard="false">
                                <!-- Emp form start -->
                                <div class="container-fluid">
                                    <!-- title -->
                                    <div class="row" style="height: 100px;">
                                        <div class="col-12 text-center ">
                                            <h2 class=""><i class="fa-solid fa-user "></i>Purchase Management </h2>

                                        </div>
                                    </div>

                                </div>
                                <form onsubmit="return false" id="formPorder">


                                    <div class="p-5 pt-0 fw-bold">

                                        <div class="row main justify-content-md-center ">
                                            <!-- style="margin-top: 10px;width: 1200px; margin-left: 200px;" -->
                                            <div class="container ">
                                                <!-- Required field -->
                                                <div class="row" style="margin-left: 10px;">

                                                    <div>
                                                        <b>
                                                            <p class="fw-bold fs-5 fw-bold">
                                                                <span class="text-danger">

                                                                    * Required
                                                                </span>
                                                            </p>
                                                        </b>
                                                    </div>
                                                </div>
                                                <!-- Required field end -->

                                                <div class="row mt-2">
                                                    <div class="col-5">
                                                        <div class="row mt-2">
                                                            <label for="selectSupplierlist"
                                                                class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                Supplier<span style="color: red;">*</span>

                                                            </label>
                                                            <div class="col-lg-10">
                                                                <select class="form-select form-select-lg"
                                                                    aria-label="Default select example"
                                                                    id="selectSupplierlist"
                                                                    onchange="selectDFieldValidation(selectSupplierlist,'', 'porder', 'supplier_id','oldOrder')">

                                                                </select>
                                                            </div>


                                                            <label for="inputDateRequired"
                                                                class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                Required Date<span style="color: red;">*</span>

                                                            </label>
                                                            <div class="col-lg-10">
                                                                <input type="date" class="form-control form-control-lg"
                                                                    id="inputDateRequired" required
                                                                    onchange="dateFieldValidation(inputDateRequired,'','porder','requireddate','oldOrder');">
                                                            </div>


                                                            <label for="inputTotalAmount"
                                                                class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                Total Amount(Rs)<span style="color: red;">*</span>

                                                            </label>
                                                            <div class="col-lg-10">
                                                                <input type="text" class="form-control form-control-lg"
                                                                    id="inputTotalAmount" required
                                                                    placeholder="enter total price"
                                                                    onkeyup="textValidation(inputTotalAmount,'','porder','totalamount','oldOrder');">
                                                            </div>


                                                            <label for="inputNote"
                                                                class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                Note

                                                            </label>
                                                            <div class="col-lg-10">
                                                                <textarea class="form-control"
                                                                    aria-label="With textarea" id="inputNote"
                                                                    onkeyup="textValidation(inputNote,'','porder','note','oldOrder');">

                                                                </textarea>
                                                            </div>


                                                            <label for="selectPOrderStatus"
                                                                class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                Status<span style="color: red;">*</span>

                                                            </label>
                                                            <div class="col-lg-10">
                                                                <select class="form-select form-select-lg"
                                                                    aria-label="Default select example"
                                                                    id="selectPOrderStatus"
                                                                    onchange="selectFieldValidation(selectPOrderStatus,'', 'porder', 'porderstatus_id','oldemployee')">

                                                                </select>
                                                            </div>

                                                        </div>

                                                    </div>
                                                    <div class="col-7">
                                                        <!-- inner form -->
                                                        <div class="row mt-2">
                                                            <div class="col-12">
                                                                <div class="row mt-2">
                                                                    <div class="col-7">
                                                                        <label for="selectItem"
                                                                            class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                            Item<span style="color: red;">*</span>

                                                                        </label>
                                                                        <div class="col-lg-10">
                                                                            <select class="form-select form-select-lg"
                                                                                aria-label="Default select example"
                                                                                id="selectItem"
                                                                                onchange="selectDFieldValidation(selectItem,'', 'porderItem', 'item_id','oldPorderItem'); generateUnitPrice()">

                                                                            </select>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-5">
                                                                        <label for="inputUnitPrice"
                                                                            class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                            UnitPrice(Rs)<span
                                                                                style="color: red;">*</span>

                                                                        </label>
                                                                        <div class="col-lg-10">
                                                                            <input type="text"
                                                                                class="form-control form-control-lg"
                                                                                id="inputUnitPrice" required
                                                                                placeholder="enter Unit price"
                                                                                onkeyup="textValidation(this,'^[1-9][0-9]{0,7}[.][0-9]{2}$','porderItem','purchaseprice','oldPorderItem'); generateUp()">
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                                <div class="row mt-2">

                                                                    <div class="col-6">
                                                                        <label for="inputQuantity"
                                                                            class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                            Quantity<span style="color: red;">*</span>

                                                                        </label>
                                                                        <div class="col-lg-10">
                                                                            <input type="text"
                                                                                class="form-control form-control-lg"
                                                                                id="inputQuantity" required
                                                                                placeholder="enter qty"
                                                                                onchange="textValidation(inputQuantity,'^[1-9][0-9]{0,3}$','porderItem','orderedqty','oldPorderItem'); calculateLinePrice(); ">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-6">
                                                                        <label for="inputLinePrice"
                                                                            class="col-sm-2 col-form-label fs-5 fw-bold">
                                                                            LinePrice<span style="color: red;">*</span>

                                                                        </label>
                                                                        <div class="col-lg-10">
                                                                            <input type="text"
                                                                                class="form-control form-control-lg"
                                                                                id="inputLinePrice" required
                                                                                placeholder="enter line price"
                                                                                onkeyup="textValidation(inputLinePrice,'','porderItem','lineprice','oldPorderItem');">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- button group start -->
                                                            <div class="row mb-3"
                                                                style="display: flex;justify-content: space-between;">
                                                                <div class="col">
                                                                    <button id="btnEmpclear" type="button"
                                                                        class="btn btn-lg btn-info"><i
                                                                            class="fa-solid fa-broom"></i>Clear</button>
                                                                </div>
                                                                <div class="col"
                                                                    style="display: flex; justify-content: flex-end;gap:10px">
                                                                    <button id="btnUploadInnerItem" type="button"
                                                                        class="btn btn-lg btn-warning"
                                                                        style="border-radius: 30px; pointers-events:all;"
                                                                        onclick="buttonEmpUpdate()"><i
                                                                            class="fa-solid fa-pen-to-square"></i>Update</button>
                                                                    <button id="btnAddInnerItem" type="button"
                                                                        class="btn btn-lg btn-success"
                                                                        style="border-radius: 30px;"
                                                                        onclick="buttonInnerItemAdd()"><i
                                                                            class="fa-solid fa-plus"></i>Add</button>
                                                                </div>
                                                            </div>
                                                            <!-- button group end -->
                                                        </div>
                                                        <!-- inner table -->
                                                        <div class="row mt-2">
                                                            <table id="tablePorderItem"
                                                                class="table table-striped table-bordered">
                                                                <thead>
                                                                    <th>#</th>
                                                                    <th>Item Name</th>
                                                                    <th>Unit Price</th>
                                                                    <th>Qty</th>
                                                                    <th>Line Price</th>
                                                                    <th>Buttons</th>

                                                                </thead>
                                                                <tbody></tbody>
                                                            </table>
                                                        </div>

                                                    </div>
                                                </div>
                                                <!-- button group start -->
                                                <div class="row mb-3"
                                                    style="display: flex;justify-content: space-between;">
                                                    <div class="col">
                                                        <button id="btnEmpclear" type="button"
                                                            class="btn btn-lg btn-info"><i
                                                                class="fa-solid fa-broom"></i>Clear</button>
                                                    </div>
                                                    <div class="col"
                                                        style="display: flex; justify-content: flex-end;gap:10px">
                                                        <button id="btnPorderUpd" type="button"
                                                            class="btn btn-lg btn-warning"
                                                            style="border-radius: 30px; pointers-events:all;"
                                                            onclick="buttonPorderUpdate()"><i
                                                                class="fa-solid fa-pen-to-square"></i>Update</button>
                                                        <button id="btnPorderAdd" type="button"
                                                            class="btn btn-lg btn-success" style="border-radius: 30px;"
                                                            onclick="buttonPorderAdd()"><i
                                                                class="fa-solid fa-plus"></i>Add</button>
                                                    </div>
                                                </div>
                                                <!-- button group end -->
                                            </div>





                                        </div>
                                    </div>
                            </div>


                            </form>
                            <!-- Emp form end -->

                        </div>

                    </div>
                </div>
            </div>
            <!-- form modal end -->
            <!-- form button end -->
            <!-- table start -->
            <table class="table table-bordered " id="tableEmployee">
                <thead class="table-dark">
                    <th>#</th>
                    <th>Number</th>
                    <th>Full Name</th>
                    <th>NIC</th>
                    <th>Mobile</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th>Designation</th>
                    <th>Use Account</th>
                    <th>Button</th>
                </thead>
                <tbody>
                </tbody>
            </table>
            <!-- table end -->

        </div>
    </div>
    </div>

    <!-- link js file -->
    <!-- <script src="employeeModal.js"></script> -->
</body>

</html>